var link=document.querySelector(".button"),popup=document.querySelector(".wrapper-search-form"),sendForm=popup.querySelector(".modal-search-form"),storage=localStorage.getItem("adult"),arrivalDate=(storage=localStorage.getItem("children"),popup.querySelector("[name=arrival-date]")),departureDate=popup.querySelector("[name=departure-date]"),adult=popup.querySelector(".half-width-adult"),children=popup.querySelector(".half-width-children"),isStorageSupport=!0;storage="";try{storage=localStorage.getItem("adult"),storage=localStorage.getItem("children")}catch(e){isStorageSupport=!1}popup.classList.add("wrapper-search-form-close"),link.addEventListener("click",function(e){e.preventDefault(),popup.classList.toggle("wrapper-search-form-close"),arrivalDate.classList.remove("modal-error"),departureDate.classList.remove("modal-error"),adult.classList.remove("modal-error"),children.classList.remove("modal-error"),arrivalDate.focus()}),sendForm.addEventListener("submit",function(e){arrivalDate.value&&departureDate.value&&adult.value&&children.value?isStorageSupport&&(localStorage.setItem("adult",adult.value),localStorage.setItem("children",children.value)):(e.preventDefault(),arrivalDate.classList.remove("modal-error"),arrivalDate.offsetWidth=popup.offsetWidth,departureDate.classList.remove("modal-error"),departureDate.offsetWidth=popup.offsetWidth,adult.classList.remove("modal-error"),adult.offsetWidth=popup.offsetWidth,children.classList.remove("modal-error"),children.offsetWidth=popup.offsetWidth,arrivalDate.classList.add("modal-error"),departureDate.classList.add("modal-error"),adult.classList.add("modal-error"),children.classList.add("modal-error"),console.log("заполните поля"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-search-form-show")&&(popup.classList.remove("modal-search-form-show"),popup.classList.remove("modal-error")))});
